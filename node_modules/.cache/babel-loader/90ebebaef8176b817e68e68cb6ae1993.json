{"ast":null,"code":"import { changePage, loading, savingOrcamento, toggleModal } from \"./Actions\";\nimport callBackend from \"./CallBackend\";\nimport { ChangePage } from \"./ChangePage\";\n\nvar crypto = require(\"crypto\");\n\nexport const saveOrcamento = infos => {\n  return (dispatch, getState) => {\n    try {\n      let {\n        socket\n      } = getState().pages;\n      let token = localStorage.getItem(\"token\");\n      let id;\n      let orcamento;\n\n      if (typeof infos !== \"string\") {\n        dispatch(savingOrcamento(true));\n        let {\n          subTotal,\n          subTotalDisponivel,\n          total,\n          totalDisponivel,\n          ...rest\n        } = infos;\n        orcamento = { ...rest,\n          ultimaModificacao: new Date().toString()\n        };\n      } else {\n        dispatch(loading(true));\n        let id = crypto.randomBytes(20).toString(\"hex\").toUpperCase();\n        orcamento = {\n          id,\n          titulo: infos,\n          pagamentoAntecipado: false,\n          itens: [{\n            sku: \"\",\n            nome: \"\",\n            caixaMaster: 0,\n            valor: 0,\n            quantidade: 0,\n            multiplo: 0,\n            estoque: 0\n          }],\n          criadoEm: new Date(),\n          ultimaModificacao: new Date()\n        };\n      }\n\n      callBackend(socket, \"saveOrcamento\", token, { ...orcamento\n      }).then(r => {\n        dispatch(savingOrcamento(false));\n        dispatch(loading(false));\n\n        if (typeof infos === \"string\") {\n          dispatch(ChangePage(\"salvos\"));\n          dispatch(toggleModal(\"criarOrcamento\", false));\n        }\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  };\n};","map":{"version":3,"sources":["C:/Users/rocan/OneDrive/Documents/SummitPrime/frontendDev/src/Redux/Actions/SaveOrcamento.js"],"names":["changePage","loading","savingOrcamento","toggleModal","callBackend","ChangePage","crypto","require","saveOrcamento","infos","dispatch","getState","socket","pages","token","localStorage","getItem","id","orcamento","subTotal","subTotalDisponivel","total","totalDisponivel","rest","ultimaModificacao","Date","toString","randomBytes","toUpperCase","titulo","pagamentoAntecipado","itens","sku","nome","caixaMaster","valor","quantidade","multiplo","estoque","criadoEm","then","r","e","console","log"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,OAArB,EAA8BC,eAA9B,EAA+CC,WAA/C,QAAkE,WAAlE;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,SAASC,UAAT,QAA2B,cAA3B;;AACA,IAAIC,MAAM,GAAGC,OAAO,CAAC,QAAD,CAApB;;AAEA,OAAO,MAAMC,aAAa,GAAIC,KAAD,IAAW;AACtC,SAAO,CAACC,QAAD,EAAWC,QAAX,KAAwB;AAC7B,QAAI;AACF,UAAI;AAAEC,QAAAA;AAAF,UAAaD,QAAQ,GAAGE,KAA5B;AACA,UAAIC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ;AACA,UAAIC,EAAJ;AACA,UAAIC,SAAJ;;AACA,UAAI,OAAOT,KAAP,KAAiB,QAArB,EAA+B;AAC7BC,QAAAA,QAAQ,CAACR,eAAe,CAAC,IAAD,CAAhB,CAAR;AACA,YAAI;AAAEiB,UAAAA,QAAF;AAAYC,UAAAA,kBAAZ;AAAgCC,UAAAA,KAAhC;AAAuCC,UAAAA,eAAvC;AAAwD,aAAGC;AAA3D,YACFd,KADF;AAEAS,QAAAA,SAAS,GAAG,EAAE,GAAGK,IAAL;AAAWC,UAAAA,iBAAiB,EAAE,IAAIC,IAAJ,GAAWC,QAAX;AAA9B,SAAZ;AACD,OALD,MAKO;AACLhB,QAAAA,QAAQ,CAACT,OAAO,CAAC,IAAD,CAAR,CAAR;AACA,YAAIgB,EAAE,GAAGX,MAAM,CAACqB,WAAP,CAAmB,EAAnB,EAAuBD,QAAvB,CAAgC,KAAhC,EAAuCE,WAAvC,EAAT;AACAV,QAAAA,SAAS,GAAG;AACVD,UAAAA,EADU;AAEVY,UAAAA,MAAM,EAAEpB,KAFE;AAGVqB,UAAAA,mBAAmB,EAAE,KAHX;AAIVC,UAAAA,KAAK,EAAE,CACL;AACEC,YAAAA,GAAG,EAAE,EADP;AAEEC,YAAAA,IAAI,EAAE,EAFR;AAGEC,YAAAA,WAAW,EAAE,CAHf;AAIEC,YAAAA,KAAK,EAAE,CAJT;AAKEC,YAAAA,UAAU,EAAE,CALd;AAMEC,YAAAA,QAAQ,EAAE,CANZ;AAOEC,YAAAA,OAAO,EAAE;AAPX,WADK,CAJG;AAeVC,UAAAA,QAAQ,EAAE,IAAId,IAAJ,EAfA;AAgBVD,UAAAA,iBAAiB,EAAE,IAAIC,IAAJ;AAhBT,SAAZ;AAkBD;;AACDrB,MAAAA,WAAW,CAACQ,MAAD,EAAS,eAAT,EAA0BE,KAA1B,EAAiC,EAAE,GAAGI;AAAL,OAAjC,CAAX,CAA8DsB,IAA9D,CACGC,CAAD,IAAO;AACL/B,QAAAA,QAAQ,CAACR,eAAe,CAAC,KAAD,CAAhB,CAAR;AACAQ,QAAAA,QAAQ,CAACT,OAAO,CAAC,KAAD,CAAR,CAAR;;AACA,YAAI,OAAOQ,KAAP,KAAiB,QAArB,EAA+B;AAC7BC,UAAAA,QAAQ,CAACL,UAAU,CAAC,QAAD,CAAX,CAAR;AACAK,UAAAA,QAAQ,CAACP,WAAW,CAAC,gBAAD,EAAmB,KAAnB,CAAZ,CAAR;AACD;AACF,OARH;AAUD,KA1CD,CA0CE,OAAOuC,CAAP,EAAU;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACD;AACF,GA9CD;AA+CD,CAhDM","sourcesContent":["import { changePage, loading, savingOrcamento, toggleModal } from \"./Actions\";\r\nimport callBackend from \"./CallBackend\";\r\nimport { ChangePage } from \"./ChangePage\";\r\nvar crypto = require(\"crypto\");\r\n\r\nexport const saveOrcamento = (infos) => {\r\n  return (dispatch, getState) => {\r\n    try {\r\n      let { socket } = getState().pages;\r\n      let token = localStorage.getItem(\"token\");\r\n      let id;\r\n      let orcamento;\r\n      if (typeof infos !== \"string\") {\r\n        dispatch(savingOrcamento(true));\r\n        let { subTotal, subTotalDisponivel, total, totalDisponivel, ...rest } =\r\n          infos;\r\n        orcamento = { ...rest, ultimaModificacao: new Date().toString() };\r\n      } else {\r\n        dispatch(loading(true));\r\n        let id = crypto.randomBytes(20).toString(\"hex\").toUpperCase();\r\n        orcamento = {\r\n          id,\r\n          titulo: infos,\r\n          pagamentoAntecipado: false,\r\n          itens: [\r\n            {\r\n              sku: \"\",\r\n              nome: \"\",\r\n              caixaMaster: 0,\r\n              valor: 0,\r\n              quantidade: 0,\r\n              multiplo: 0,\r\n              estoque: 0,\r\n            },\r\n          ],\r\n          criadoEm: new Date(),\r\n          ultimaModificacao: new Date(),\r\n        };\r\n      }\r\n      callBackend(socket, \"saveOrcamento\", token, { ...orcamento }).then(\r\n        (r) => {\r\n          dispatch(savingOrcamento(false));\r\n          dispatch(loading(false));\r\n          if (typeof infos === \"string\") {\r\n            dispatch(ChangePage(\"salvos\"));\r\n            dispatch(toggleModal(\"criarOrcamento\", false));\r\n          }\r\n        }\r\n      );\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}