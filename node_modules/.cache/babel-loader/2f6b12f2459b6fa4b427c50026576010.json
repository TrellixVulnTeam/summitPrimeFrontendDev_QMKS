{"ast":null,"code":"import { setFiltros, setProdutosAtivos } from \"../Actions\";\nimport { SetOrdem } from \"./SetOrdem\";\nexport const ToggleFiltros = values => {\n  return async (dispatch, getState) => {\n    let produtos = getState().databank.produtos;\n    let filtros = getState().loja.filtros;\n    let {\n      mlce,\n      categorias,\n      isChecked,\n      ordem\n    } = values;\n\n    if (mlce && categorias) {\n      filtros[mlce.toLowerCase()][categorias].checked = isChecked;\n      let allChecked = [];\n      let mlceKeys = Object.keys(filtros);\n\n      for (let i = 0; i < mlceKeys.length; i++) {\n        const mlceKey = filtros[mlceKeys[i]];\n        let categoriasKeys = Object.keys(mlceKey);\n\n        for (let j = 0; j < categoriasKeys.length; j++) {\n          const categoriasKey = mlceKey[categoriasKeys[j]];\n\n          if (categoriasKey.checked) {\n            let toPush = [mlceKeys[i], categoriasKeys[j]];\n            allChecked.push(toPush);\n          }\n        }\n      }\n\n      let produtosAtivos = [];\n\n      for (let i = 0; i < produtos.length; i++) {\n        const produto = produtos[i];\n        let flag = 1;\n\n        for (let j = 0; j < allChecked.length; j++) {\n          const checked = allChecked[j];\n\n          if (produto.tags[checked[0]] != checked[1]) {\n            flag = 0;\n          }\n        }\n\n        if (flag === 1) {\n          produtosAtivos.push(produto);\n        }\n      }\n\n      let tags = {};\n\n      for (let a = 0; a < mlceKeys.length; a++) {\n        const mlceKey = mlceKeys[a];\n        const mcle = filtros[mlceKey];\n        tags[mlceKey] = {};\n        let categoriasKeys = Object.keys(mcle);\n\n        for (let b = 0; b < categoriasKeys.length; b++) {\n          const categoriasKey = categoriasKeys[b];\n          tags[mlceKey][categoriasKey] = {\n            checked: false,\n            ativo: false,\n            quantidade: 0\n          };\n\n          if (filtros[mlceKey][categoriasKey].checked === true) {\n            tags[mlceKey][categoriasKey].checked = true;\n          }\n\n          for (let i = 0; i < produtosAtivos.length; i++) {\n            const produtoAtivo = produtosAtivos[i];\n\n            if (produtoAtivo.tags[mlceKey] == categoriasKey) {\n              tags[mlceKey][categoriasKey] = { ...tags[mlceKey][categoriasKey],\n                ativo: true,\n                quantidade: tags[mlceKey][categoriasKey].quantidade + 1\n              };\n            }\n          }\n        }\n      }\n    }\n\n    if (!ordem) {\n      let ordens = getState().loja.ordens;\n      type = ordens.find(ordem => {\n        return ordem.active === true;\n      });\n      type = type.value;\n    }\n\n    switch (ordem) {\n      case \"nomeAZ\":\n        produtosAtivos.sort((x, y) => {\n          let a = x.nomeVnda;\n          let b = y.nomeVnda;\n          return a === b ? 0 : a > b ? 1 : -1;\n        });\n        break;\n\n      case \"nomeZA\":\n        produtosAtivos.sort((x, y) => {\n          let a = x.nomeVnda;\n          let b = y.nomeVnda;\n          return a === b ? 0 : a < b ? 1 : -1;\n        });\n        break;\n\n      case \"precoCrescente\":\n        produtosAtivos.sort((x, y) => {\n          let a = x.valor;\n          let b = y.valor;\n          return a === b ? 0 : a > b ? 1 : -1;\n        });\n        break;\n\n      case \"precoDecresente\":\n        console.log(produtosAtivos);\n        produtosAtivos.sort((x, y) => {\n          let a = x.valor;\n          let b = y.valor;\n          return a === b ? 0 : a < b ? 1 : -1;\n        });\n        break;\n\n      case \"start\":\n        type = \"nomeAZ\";\n        produtosAtivos.sort((x, y) => {\n          let a = x.nomeVnda;\n          let b = y.nomeVnda;\n          return a === b ? 0 : a > b ? 1 : -1;\n        });\n        let produtosMega = produtosAtivos.filter(produto => {\n          return produto.tags.linha === \"Tris Mega\";\n        });\n        let produtosNaoMega = produtosAtivos.filter(produto => {\n          return produto.tags.linha !== \"Tris Mega\";\n        });\n        produtosAtivos = [...produtosMega, ...produtosNaoMega];\n        break;\n\n      default:\n        break;\n    }\n\n    dispatch(setProdutosAtivos(produtosAtivos));\n    dispatch(setOrdemAtiva(ordem));\n    dispatch(setFiltros(tags));\n  };\n};\n_c = ToggleFiltros;\n\nvar _c;\n\n$RefreshReg$(_c, \"ToggleFiltros\");","map":{"version":3,"sources":["C:/Users/rocan/OneDrive/Documents/SummitPrime/frontendDev/src/Redux/Actions/Loja/ToggleFiltros.js"],"names":["setFiltros","setProdutosAtivos","SetOrdem","ToggleFiltros","values","dispatch","getState","produtos","databank","filtros","loja","mlce","categorias","isChecked","ordem","toLowerCase","checked","allChecked","mlceKeys","Object","keys","i","length","mlceKey","categoriasKeys","j","categoriasKey","toPush","push","produtosAtivos","produto","flag","tags","a","mcle","b","ativo","quantidade","produtoAtivo","ordens","type","find","active","value","sort","x","y","nomeVnda","valor","console","log","produtosMega","filter","linha","produtosNaoMega","setOrdemAtiva"],"mappings":"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","sourcesContent":["import { setFiltros, setProdutosAtivos } from \"../Actions\";\r\nimport { SetOrdem } from \"./SetOrdem\";\r\n\r\nexport const ToggleFiltros = (values) => {\r\n  return async (dispatch, getState) => {\r\n    let produtos = getState().databank.produtos;\r\n    let filtros = getState().loja.filtros;\r\n    let { mlce, categorias, isChecked, ordem } = values;\r\n    if (mlce && categorias) {\r\n      filtros[mlce.toLowerCase()][categorias].checked = isChecked;\r\n\r\n      let allChecked = [];\r\n\r\n      let mlceKeys = Object.keys(filtros);\r\n      for (let i = 0; i < mlceKeys.length; i++) {\r\n        const mlceKey = filtros[mlceKeys[i]];\r\n        let categoriasKeys = Object.keys(mlceKey);\r\n        for (let j = 0; j < categoriasKeys.length; j++) {\r\n          const categoriasKey = mlceKey[categoriasKeys[j]];\r\n\r\n          if (categoriasKey.checked) {\r\n            let toPush = [mlceKeys[i], categoriasKeys[j]];\r\n            allChecked.push(toPush);\r\n          }\r\n        }\r\n      }\r\n\r\n      let produtosAtivos = [];\r\n      for (let i = 0; i < produtos.length; i++) {\r\n        const produto = produtos[i];\r\n        let flag = 1;\r\n        for (let j = 0; j < allChecked.length; j++) {\r\n          const checked = allChecked[j];\r\n          if (produto.tags[checked[0]] != checked[1]) {\r\n            flag = 0;\r\n          }\r\n        }\r\n        if (flag === 1) {\r\n          produtosAtivos.push(produto);\r\n        }\r\n      }\r\n\r\n      let tags = {};\r\n      for (let a = 0; a < mlceKeys.length; a++) {\r\n        const mlceKey = mlceKeys[a];\r\n        const mcle = filtros[mlceKey];\r\n        tags[mlceKey] = {};\r\n        let categoriasKeys = Object.keys(mcle);\r\n        for (let b = 0; b < categoriasKeys.length; b++) {\r\n          const categoriasKey = categoriasKeys[b];\r\n          tags[mlceKey][categoriasKey] = {\r\n            checked: false,\r\n            ativo: false,\r\n            quantidade: 0,\r\n          };\r\n          if (filtros[mlceKey][categoriasKey].checked === true) {\r\n            tags[mlceKey][categoriasKey].checked = true;\r\n          }\r\n          for (let i = 0; i < produtosAtivos.length; i++) {\r\n            const produtoAtivo = produtosAtivos[i];\r\n            if (produtoAtivo.tags[mlceKey] == categoriasKey) {\r\n              tags[mlceKey][categoriasKey] = {\r\n                ...tags[mlceKey][categoriasKey],\r\n                ativo: true,\r\n                quantidade: tags[mlceKey][categoriasKey].quantidade + 1,\r\n              };\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (!ordem) {\r\n      let ordens = getState().loja.ordens;\r\n      type = ordens.find((ordem) => {\r\n        return ordem.active === true;\r\n      });\r\n      type = type.value;\r\n    }\r\n\r\n    switch (ordem) {\r\n      case \"nomeAZ\":\r\n        produtosAtivos.sort((x, y) => {\r\n          let a = x.nomeVnda;\r\n          let b = y.nomeVnda;\r\n\r\n          return a === b ? 0 : a > b ? 1 : -1;\r\n        });\r\n        break;\r\n      case \"nomeZA\":\r\n        produtosAtivos.sort((x, y) => {\r\n          let a = x.nomeVnda;\r\n          let b = y.nomeVnda;\r\n\r\n          return a === b ? 0 : a < b ? 1 : -1;\r\n        });\r\n        break;\r\n      case \"precoCrescente\":\r\n        produtosAtivos.sort((x, y) => {\r\n          let a = x.valor;\r\n          let b = y.valor;\r\n\r\n          return a === b ? 0 : a > b ? 1 : -1;\r\n        });\r\n        break;\r\n      case \"precoDecresente\":\r\n        console.log(produtosAtivos);\r\n        produtosAtivos.sort((x, y) => {\r\n          let a = x.valor;\r\n          let b = y.valor;\r\n\r\n          return a === b ? 0 : a < b ? 1 : -1;\r\n        });\r\n\r\n        break;\r\n      case \"start\":\r\n        type = \"nomeAZ\";\r\n        produtosAtivos.sort((x, y) => {\r\n          let a = x.nomeVnda;\r\n          let b = y.nomeVnda;\r\n\r\n          return a === b ? 0 : a > b ? 1 : -1;\r\n        });\r\n        let produtosMega = produtosAtivos.filter((produto) => {\r\n          return produto.tags.linha === \"Tris Mega\";\r\n        });\r\n        let produtosNaoMega = produtosAtivos.filter((produto) => {\r\n          return produto.tags.linha !== \"Tris Mega\";\r\n        });\r\n\r\n        produtosAtivos = [...produtosMega, ...produtosNaoMega];\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    dispatch(setProdutosAtivos(produtosAtivos));\r\n    dispatch(setOrdemAtiva(ordem));\r\n    dispatch(setFiltros(tags));\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}