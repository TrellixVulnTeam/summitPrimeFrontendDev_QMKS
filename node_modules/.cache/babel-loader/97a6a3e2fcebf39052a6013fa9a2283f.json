{"ast":null,"code":"import { toggleLoading, updateDatabank } from \"../Actions\";\nimport { SetFiltros } from \"../Loja/SetFiltros\";\nimport { CalculateOrcamentosPrime } from \"../Orcamentos/CalculateOrcamentosPrime\";\nimport CallBackend from \"../Utils/CallBackend\";\nimport { Logout } from \"./Logout\";\nexport const GetUserInfo = () => {\n  return async (dispatch, getState) => {\n    let {\n      socket\n    } = getState().config;\n    let token = localStorage.getItem(\"token\");\n\n    if (token) {\n      dispatch(toggleLoading(true));\n      await CallBackend(socket, \"getUserInfo\", token).then(async r => {\n        await dispatch(updateDatabank({\n          userInfo: r.informacoes\n        }));\n        r.produtos.sort((x, y) => {\n          let a = x.nomeVnda;\n          let b = y.nomeVnda;\n          return a === b ? 0 : a > b ? 1 : -1;\n        });\n        await dispatch(updateDatabank({\n          produtos: r.produtos\n        }));\n        await dispatch(CalculateOrcamentosPrime(r.orcamentos));\n        await dispatch(SetFiltros());\n      }).catch(err => {\n        // dispatch(logout());\n        dispatch(toggleLoading(false));\n      });\n    } else {\n      dispatch(Logout());\n      dispatch(toggleLoading(false));\n    }\n  };\n};\n_c = GetUserInfo;\n\nvar _c;\n\n$RefreshReg$(_c, \"GetUserInfo\");","map":{"version":3,"sources":["C:/Users/rocan/OneDrive/Documents/SummitPrime/frontendDev/src/Redux/Actions/Config/GetUserInfo.js"],"names":["toggleLoading","updateDatabank","SetFiltros","CalculateOrcamentosPrime","CallBackend","Logout","GetUserInfo","dispatch","getState","socket","config","token","localStorage","getItem","then","r","userInfo","informacoes","produtos","sort","x","y","a","nomeVnda","b","orcamentos","catch","err"],"mappings":"AAAA,SAASA,aAAT,EAAwBC,cAAxB,QAA8C,YAA9C;AACA,SAASC,UAAT,QAA2B,oBAA3B;AACA,SAASC,wBAAT,QAAyC,wCAAzC;AACA,OAAOC,WAAP,MAAwB,sBAAxB;AACA,SAASC,MAAT,QAAuB,UAAvB;AAEA,OAAO,MAAMC,WAAW,GAAG,MAAM;AAC/B,SAAO,OAAOC,QAAP,EAAiBC,QAAjB,KAA8B;AACnC,QAAI;AAAEC,MAAAA;AAAF,QAAaD,QAAQ,GAAGE,MAA5B;AACA,QAAIC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ;;AACA,QAAIF,KAAJ,EAAW;AACTJ,MAAAA,QAAQ,CAACP,aAAa,CAAC,IAAD,CAAd,CAAR;AACA,YAAMI,WAAW,CAACK,MAAD,EAAS,aAAT,EAAwBE,KAAxB,CAAX,CACHG,IADG,CACE,MAAOC,CAAP,IAAa;AACjB,cAAMR,QAAQ,CAACN,cAAc,CAAC;AAAEe,UAAAA,QAAQ,EAAED,CAAC,CAACE;AAAd,SAAD,CAAf,CAAd;AACAF,QAAAA,CAAC,CAACG,QAAF,CAAWC,IAAX,CAAgB,CAACC,CAAD,EAAIC,CAAJ,KAAU;AACxB,cAAIC,CAAC,GAAGF,CAAC,CAACG,QAAV;AACA,cAAIC,CAAC,GAAGH,CAAC,CAACE,QAAV;AAEA,iBAAOD,CAAC,KAAKE,CAAN,GAAU,CAAV,GAAcF,CAAC,GAAGE,CAAJ,GAAQ,CAAR,GAAY,CAAC,CAAlC;AACD,SALD;AAMA,cAAMjB,QAAQ,CAACN,cAAc,CAAC;AAAEiB,UAAAA,QAAQ,EAAEH,CAAC,CAACG;AAAd,SAAD,CAAf,CAAd;AACA,cAAMX,QAAQ,CAACJ,wBAAwB,CAACY,CAAC,CAACU,UAAH,CAAzB,CAAd;AACA,cAAMlB,QAAQ,CAACL,UAAU,EAAX,CAAd;AACD,OAZG,EAaHwB,KAbG,CAaIC,GAAD,IAAS;AACd;AACApB,QAAAA,QAAQ,CAACP,aAAa,CAAC,KAAD,CAAd,CAAR;AACD,OAhBG,CAAN;AAiBD,KAnBD,MAmBO;AACLO,MAAAA,QAAQ,CAACF,MAAM,EAAP,CAAR;AACAE,MAAAA,QAAQ,CAACP,aAAa,CAAC,KAAD,CAAd,CAAR;AACD;AACF,GA1BD;AA2BD,CA5BM;KAAMM,W","sourcesContent":["import { toggleLoading, updateDatabank } from \"../Actions\";\r\nimport { SetFiltros } from \"../Loja/SetFiltros\";\r\nimport { CalculateOrcamentosPrime } from \"../Orcamentos/CalculateOrcamentosPrime\";\r\nimport CallBackend from \"../Utils/CallBackend\";\r\nimport { Logout } from \"./Logout\";\r\n\r\nexport const GetUserInfo = () => {\r\n  return async (dispatch, getState) => {\r\n    let { socket } = getState().config;\r\n    let token = localStorage.getItem(\"token\");\r\n    if (token) {\r\n      dispatch(toggleLoading(true));\r\n      await CallBackend(socket, \"getUserInfo\", token)\r\n        .then(async (r) => {\r\n          await dispatch(updateDatabank({ userInfo: r.informacoes }));\r\n          r.produtos.sort((x, y) => {\r\n            let a = x.nomeVnda;\r\n            let b = y.nomeVnda;\r\n\r\n            return a === b ? 0 : a > b ? 1 : -1;\r\n          });\r\n          await dispatch(updateDatabank({ produtos: r.produtos }));\r\n          await dispatch(CalculateOrcamentosPrime(r.orcamentos));\r\n          await dispatch(SetFiltros());\r\n        })\r\n        .catch((err) => {\r\n          // dispatch(logout());\r\n          dispatch(toggleLoading(false));\r\n        });\r\n    } else {\r\n      dispatch(Logout());\r\n      dispatch(toggleLoading(false));\r\n    }\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}