{"ast":null,"code":"import { toggleSaving } from \"../Actions\";\nimport callBackend from \"../Utils/CallBackend\";\nexport const SaveOrcamento = () => {\n  return (dispatch, getState) => {\n    try {\n      dispatch(toggleSaving(true));\n      console.log(\"salvando:\");\n      let {\n        socket,\n        orcamentoAtivo\n      } = getState().config;\n      let orcamentos = getState().databank.orcamentosPrime;\n      let token = localStorage.getItem(\"token\");\n      let {\n        itens,\n        ...orcamentoAtual\n      } = orcamentos[orcamentoAtivo];\n      orcamentoAtual.itens = [];\n      orcamentoAtual.ultimaModificacao = new Date();\n\n      for (let i = 0; i < itens.length; i++) {\n        const {\n          sku,\n          quantidade\n        } = itens[i];\n\n        if (quantidade) {\n          orcamentoAtual.itens.push({\n            sku,\n            quantidade\n          });\n        }\n      }\n\n      console.log(orcamentoAtual);\n      callBackend(socket, \"saveOrcamento\", token, { ...orcamentoAtual\n      }).then(r => {\n        dispatch(toggleSaving(false));\n      });\n    } catch (e) {\n      console.log(e);\n      dispatch(toggleSaving(false));\n    }\n  };\n};\n_c = SaveOrcamento;\n\nvar _c;\n\n$RefreshReg$(_c, \"SaveOrcamento\");","map":{"version":3,"sources":["C:/Users/rocan/OneDrive/Documents/SummitPrime/frontendDev/src/Redux/Actions/Orcamentos/SaveOrcamento.js"],"names":["toggleSaving","callBackend","SaveOrcamento","dispatch","getState","console","log","socket","orcamentoAtivo","config","orcamentos","databank","orcamentosPrime","token","localStorage","getItem","itens","orcamentoAtual","ultimaModificacao","Date","i","length","sku","quantidade","push","then","r","e"],"mappings":"AAAA,SAASA,YAAT,QAA6B,YAA7B;AACA,OAAOC,WAAP,MAAwB,sBAAxB;AAEA,OAAO,MAAMC,aAAa,GAAG,MAAM;AACjC,SAAO,CAACC,QAAD,EAAWC,QAAX,KAAwB;AAC7B,QAAI;AACFD,MAAAA,QAAQ,CAACH,YAAY,CAAC,IAAD,CAAb,CAAR;AACAK,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACA,UAAI;AAAEC,QAAAA,MAAF;AAAUC,QAAAA;AAAV,UAA6BJ,QAAQ,GAAGK,MAA5C;AACA,UAAIC,UAAU,GAAGN,QAAQ,GAAGO,QAAX,CAAoBC,eAArC;AACA,UAAIC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ;AACA,UAAI;AAAEC,QAAAA,KAAF;AAAS,WAAGC;AAAZ,UAA+BP,UAAU,CAACF,cAAD,CAA7C;AAEAS,MAAAA,cAAc,CAACD,KAAf,GAAuB,EAAvB;AACAC,MAAAA,cAAc,CAACC,iBAAf,GAAmC,IAAIC,IAAJ,EAAnC;;AAEA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,KAAK,CAACK,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACrC,cAAM;AAAEE,UAAAA,GAAF;AAAOC,UAAAA;AAAP,YAAsBP,KAAK,CAACI,CAAD,CAAjC;;AACA,YAAIG,UAAJ,EAAgB;AACdN,UAAAA,cAAc,CAACD,KAAf,CAAqBQ,IAArB,CAA0B;AAAEF,YAAAA,GAAF;AAAOC,YAAAA;AAAP,WAA1B;AACD;AACF;;AACDlB,MAAAA,OAAO,CAACC,GAAR,CAAYW,cAAZ;AAEAhB,MAAAA,WAAW,CAACM,MAAD,EAAS,eAAT,EAA0BM,KAA1B,EAAiC,EAAE,GAAGI;AAAL,OAAjC,CAAX,CAAmEQ,IAAnE,CACGC,CAAD,IAAO;AACLvB,QAAAA,QAAQ,CAACH,YAAY,CAAC,KAAD,CAAb,CAAR;AACD,OAHH;AAKD,KAxBD,CAwBE,OAAO2B,CAAP,EAAU;AACVtB,MAAAA,OAAO,CAACC,GAAR,CAAYqB,CAAZ;AACAxB,MAAAA,QAAQ,CAACH,YAAY,CAAC,KAAD,CAAb,CAAR;AACD;AACF,GA7BD;AA8BD,CA/BM;KAAME,a","sourcesContent":["import { toggleSaving } from \"../Actions\";\r\nimport callBackend from \"../Utils/CallBackend\";\r\n\r\nexport const SaveOrcamento = () => {\r\n  return (dispatch, getState) => {\r\n    try {\r\n      dispatch(toggleSaving(true));\r\n      console.log(\"salvando:\");\r\n      let { socket, orcamentoAtivo } = getState().config;\r\n      let orcamentos = getState().databank.orcamentosPrime;\r\n      let token = localStorage.getItem(\"token\");\r\n      let { itens, ...orcamentoAtual } = orcamentos[orcamentoAtivo];\r\n\r\n      orcamentoAtual.itens = [];\r\n      orcamentoAtual.ultimaModificacao = new Date();\r\n\r\n      for (let i = 0; i < itens.length; i++) {\r\n        const { sku, quantidade } = itens[i];\r\n        if (quantidade) {\r\n          orcamentoAtual.itens.push({ sku, quantidade });\r\n        }\r\n      }\r\n      console.log(orcamentoAtual);\r\n\r\n      callBackend(socket, \"saveOrcamento\", token, { ...orcamentoAtual }).then(\r\n        (r) => {\r\n          dispatch(toggleSaving(false));\r\n        }\r\n      );\r\n    } catch (e) {\r\n      console.log(e);\r\n      dispatch(toggleSaving(false));\r\n    }\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}